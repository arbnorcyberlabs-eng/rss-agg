import{_ as m,u as g,i as p,c as n,b as i,t as l,k as a,w as d,v as c,m as h,j as u}from"./index-DEE9wAoI.js";const f={name:"AuthForm",setup(){const t=g(),e=p();return{authStore:t,router:e}},data(){return{isSignup:!1,email:"",password:"",fullName:"",loading:!1,error:null,success:null}},methods:{async handleSubmit(){this.error=null,this.success=null,this.loading=!0;try{this.isSignup?(await this.authStore.signup(this.email,this.password,this.fullName)).needsConfirmation?(this.success="✅ Account created! Please check your email to confirm your account before logging in.",this.email="",this.password="",this.fullName=""):(this.success="✅ Account created! You can now use all features.",setTimeout(()=>{this.router.push("/")},1500)):(await this.authStore.login(this.email,this.password),this.success="✅ Login successful! Redirecting...",setTimeout(()=>{this.router.push("/")},1e3))}catch(t){console.error("Auth error:",t);let e=t.message||(this.isSignup?"Signup failed":"Login failed");e.includes("Email not confirmed")?e="⚠️ Please confirm your email address before logging in. Check your inbox for the confirmation link.":e.includes("Invalid login credentials")?e="⚠️ Invalid email or password. Please try again.":(e.includes("already registered")||e.includes("User already registered"))&&(e="⚠️ This email is already registered. Please login instead."),this.error=e}finally{this.loading=!1}},toggleMode(){this.isSignup=!this.isSignup,this.error=null,this.success=null,this.email="",this.password="",this.fullName=""}}},S={class:"auth-form"},y={key:0,class:"form-group"},b={class:"form-group"},w=["placeholder"],v={class:"form-group"},_=["minlength"],N={key:1,class:"error-message"},k={key:2,class:"success-message"},A=["disabled"],x={class:"toggle-mode"};function M(t,e,P,C,s,r){return u(),n("div",S,[i("h2",null,l(s.isSignup?"Create Account":"Login"),1),i("form",{onSubmit:e[3]||(e[3]=h((...o)=>r.handleSubmit&&r.handleSubmit(...o),["prevent"]))},[s.isSignup?(u(),n("div",y,[e[5]||(e[5]=i("label",{for:"fullName"},"Full Name",-1)),d(i("input",{id:"fullName","onUpdate:modelValue":e[0]||(e[0]=o=>s.fullName=o),type:"text",placeholder:"John Doe",required:""},null,512),[[c,s.fullName]])])):a("",!0),i("div",b,[e[6]||(e[6]=i("label",{for:"email"},"Email",-1)),d(i("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>s.email=o),type:"email",placeholder:s.isSignup?"you@example.com":"admin@example.com",required:""},null,8,w),[[c,s.email]])]),i("div",v,[e[7]||(e[7]=i("label",{for:"password"},"Password",-1)),d(i("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=o=>s.password=o),type:"password",placeholder:"••••••••",minlength:s.isSignup?6:void 0,required:""},null,8,_),[[c,s.password]])]),s.error?(u(),n("div",N,l(s.error),1)):a("",!0),s.success?(u(),n("div",k,l(s.success),1)):a("",!0),i("button",{type:"submit",class:"submit-button",disabled:s.loading},l(s.loading?"Processing...":s.isSignup?"Sign Up":"Login"),9,A)],32),i("div",x,[i("button",{type:"button",class:"toggle-button",onClick:e[4]||(e[4]=(...o)=>r.toggleMode&&r.toggleMode(...o))},l(s.isSignup?"Already have an account? Login":"Need an account? Sign up"),1)])])}const U=m(f,[["render",M],["__scopeId","data-v-c8121585"]]);export{U as A};
